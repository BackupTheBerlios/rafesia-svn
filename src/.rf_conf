#!/bin/sh
rf_conf_info () {
	_RF_CONF_OPTIONS_NUM=0
}

rf_conf_chopt () {
	return 1
}

rf_conf_chdep () {
	return 0
}

rf_conf_mkopt () {
	return 0
}

rf_conf_generate_makefile () {
	
	if [ -e $1/Makefile ]; then
		rm -rf $1/Makefile
	fi
	
	cf_add_to_makefile "$1" "# Rafesia generated Makefile\n\n"
	
	#> ALL:
	cf_add_to_makefile "$1"  "all:\n"
	
	cf_gcc_generate "CC" "./core/internal.o" "./core/internal.c" "\`pkg-config --cflags glib-2.0\` -c" "internal.c"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"
	
	cf_gcc_generate "CC" "./ui/rf-widget-mixer.o" "./ui/rf-widget-mixer.c" "\`pkg-config --cflags gtk+-2.0\` -c" "rf-widget-mixer.c"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"
	
	cf_gcc_generate "CC" "./ui/rf-window-about.o" "./ui/rf-window-about.c" "\`pkg-config --cflags gtk+-2.0\` -c" "rf-window-about.c"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"
	
	cf_gcc_generate "CC" "./ui/rf-window-main.o" "./ui/rf-window-main.c" "\`pkg-config --cflags gtk+-2.0\` -c" "rf-window-main.c"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"

	cf_gcc_generate "CC" "plugins.o" "plugins.c" "\`pkg-config --cflags gmodule-2.0 gtk+-2.0\` -c" "plugins.c"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"

	cf_gcc_generate "CC" "rafesia.o" "rafesia.c" "\`pkg-config --cflags gtk+-2.0\` -c" "rafesia.c"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"
	
	cf_gcc_generate "LN" "rafesia" "./core/internal.o ./ui/rf-widget-mixer.o ./ui/rf-window-about.o ./ui/rf-window-main.o plugins.o rafesia.o " "\`pkg-config --cflags --libs gtk+-2.0 gthread-2.0\`" "rafesia"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"	
	
	#> CLEAN:
	cf_add_to_makefile "$1"  "\n\nclean:\n"
	
	cf_gcc_generate "RM" "./core/internal.o" "internal.o"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"

	cf_gcc_generate "RM" "./ui/rf-widget-mixer.o" "rf-widget-mixer.o"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"
	
	cf_gcc_generate "RM" "./ui/rf-window-about.o" "rf-window-about.o"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"
	
	cf_gcc_generate "RM" "./ui/rf-window-main.o" "rf-window-main.o"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"	
	
	cf_gcc_generate "RM" "plugins.o" "plugins.o"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"	
	
	cf_gcc_generate "RM" "rafesia.o" "rafesia.o"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"	
	
	cf_gcc_generate "RM" "rafesia" "rafesia"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_ECHO\n"
	cf_add_to_makefile "$1"  "$_GCC_GENERATE_RETURN\n"	
	
	cf_add_to_makefile "$1"  "\t@rm Makefile"
	
	#> INSTALL:
	cf_add_to_makefile "$1"  "\n\ninstall:\n"
	cf_add_to_makefile "$1"  "\t@cp ./rafesia ${BINDIR%/}/\n"
	
	return 0
	
}

rf_conf_unset () {
	unset rf_conf_info
		unset _RF_CONF_OPTIONS_NUM
	unset rf_conf_chopt
	unset rf_conf_chdep
	unset rf_conf_mkopt
	unset rf_conf_generate_makefile
	unset rf_conf_unset
}
